(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,a,n){},113:function(e,a){},115:function(e,a){},124:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),s=n(60),l=n.n(s),i=(n(75),n(61)),o=n(62),c=n(63),u=n(68),m=n(64),d=n(69),g=n(16),E=n.n(g),p=n(1),h=n(11),b=function(e){return r.a.createElement("main",{className:"LandingPage gradient"},r.a.createElement("h1",null,"Welcome to kTunes"),r.a.createElement("p",null,"Explore. Listen. Repeat."),r.a.createElement("p",null,"kTunes is a free, hasse-free music library. ",r.a.createElement(p.b,{to:"/newuser",className:"signInLink"},"Join today!")),null!==e.errorMessage?r.a.createElement("p",{className:"errorMessage"},"Sorry, there appears to be a ",e.errorMessage,". Please tune in again soon."):null)},f=n(67),y=n.n(f),w=function(e){return r.a.createElement("header",{className:"Header wrapper"},r.a.createElement("div",{className:"headerFlexContainer"},r.a.createElement("div",null,r.a.createElement("img",{src:y.a,alt:"Kepler Communications Logo",className:"logo"})),r.a.createElement("h1",null,r.a.createElement(p.b,{to:"/"},"kTunes")),e.signInSuccess?r.a.createElement("p",null,r.a.createElement("span",null,r.a.createElement(p.b,{to:"/home",className:"signInLink"},"kTunes Home")),r.a.createElement("span",null,r.a.createElement("button",{onClick:e.listUsersSongs},r.a.createElement(p.b,{to:"/mylibrary",className:"signInLink"},"My Library")),r.a.createElement("button",{onClick:e.signOut,className:"signInLink"},"Sign Out"))):r.a.createElement("p",null,r.a.createElement("span",{className:"signInLink"},r.a.createElement(p.b,{to:"/signin"},"Sign In")),r.a.createElement("span",{className:"signInLink"},r.a.createElement(p.b,{to:"/newuser"},"Sign Up"))," ")))},S=function(e){return r.a.createElement("div",null,e.signInSuccess?r.a.createElement("main",{className:"wrapper"},r.a.createElement("h1",null,"Home"),0===e.homeLibrary.length?r.a.createElement("div",{className:"ldsRipple"},r.a.createElement("div",null),r.a.createElement("div",null)):r.a.createElement("div",{className:"libraryMain"},r.a.createElement("aside",{className:"recentlyDownloadedAside"},r.a.createElement("h2",null,"Recently Downloaded"),e.lastDownloadId.map(function(e){return r.a.createElement("ul",null,r.a.createElement("li",{key:e.id},r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.artist),r.a.createElement("button",null,r.a.createElement("i",{className:"far fa-play-circle","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Listen to ",e.title," by ",e.artist,"."))))})),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Song"),r.a.createElement("th",null,"Artist"),r.a.createElement("th",null,"Download"))),r.a.createElement("tbody",null,e.homeLibrary.map(function(a){return r.a.createElement("tr",{key:a.id},r.a.createElement("td",null,a.title),r.a.createElement("td",null,a.artist),r.a.createElement("td",null,r.a.createElement("button",{value:a.id,onClick:e.downloadSong},r.a.createElement("i",{className:"fas fa-arrow-circle-down","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Download ",a.title," by ",a.artist,"."))))}))))):r.a.createElement(h.a,{to:"/"}))},v=function(e){return r.a.createElement("main",{className:"gradient"},r.a.createElement("h2",null,"Explore. Listen. Repeat."),r.a.createElement("p",null,"Create an account below."),r.a.createElement(p.b,{to:"/signin",className:"signInLink"},"Already a user? Sign in."),r.a.createElement("form",{onSubmit:e.createUser,className:"signInForm"},r.a.createElement("label",{htmlFor:"username",className:"visuallyHidden"},"Username"),r.a.createElement("input",{type:"text",id:"username",name:"username",onChange:e.handleChange,value:e.username,placeholder:"Username",required:!0}),r.a.createElement("label",{htmlFor:"email",className:"visuallyHidden"},"Email Address"),r.a.createElement("input",{type:"email",onChange:e.handleChange,id:"email",name:"userEmail",value:e.userEmail,placeholder:"Email Address",required:!0}),r.a.createElement("label",{htmlFor:"password",className:"visuallyHidden"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"userPassword",value:e.userPassword,onChange:e.handleChange,placeholder:"******",required:!0,minLength:"8",maxLength:"12"}),r.a.createElement("input",{type:"submit",value:"Sign Up"}),null!==e.signInError?r.a.createElement("p",null,e.signInError," ",r.a.createElement(p.b,{to:"/signin",className:"signInLink"},"Sign In")):null),null!==e.errorMessage?r.a.createElement("p",null,e.errorMessage):null,e.signInSuccess?r.a.createElement(h.a,{to:"/home"}):null)},L=function(e){return r.a.createElement("main",{className:"gradient"},r.a.createElement("h2",null,"Explore. Listen. Repeat."),r.a.createElement("p",null,"Welcome back! Please sign in."),r.a.createElement(p.b,{to:"/newuser",className:"signInLink"},"New to kTunes? Sign up!"),r.a.createElement("form",{onSubmit:e.listUsersSongs,className:"signInForm"},r.a.createElement("label",{htmlFor:"username",className:"visuallyHidden"},"Username"),r.a.createElement("input",{type:"text",id:"username",name:"username",onChange:e.handleChange,value:e.username,placeholder:"Username",required:!0}),r.a.createElement("label",{htmlFor:"email",className:"visuallyHidden"},"Email Address"),r.a.createElement("input",{type:"email",onChange:e.handleChange,id:"email",name:"userEmail",value:e.userEmail,placeholder:"Email Address",required:!0}),r.a.createElement("label",{htmlFor:"password",className:"visuallyHidden"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"userPassword",value:e.userPassword,onChange:e.handleChange,placeholder:"******",minLength:"8",maxLength:"12"}),r.a.createElement("input",{type:"submit",value:"Sign In"}),null!==e.signInError?r.a.createElement("p",null,e.signInError," ",r.a.createElement(p.b,{to:"/signup",className:"signInLink"},"Sign Up")):null),e.signInSuccess?r.a.createElement(h.a,{to:"/home"}):null)},I=function(e){return r.a.createElement("div",null,e.signInSuccess?r.a.createElement("main",{className:"wrapper"},r.a.createElement("h1",null,e.username,"'s Library"),e.usersLibrary.length!==e.usersDownloads.length?r.a.createElement("div",{className:"ldsRipple"},r.a.createElement("div",null),r.a.createElement("div",null)):r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Song"),r.a.createElement("th",null,"Artist"),r.a.createElement("th",null,"Listen"))),r.a.createElement("tbody",null,e.usersLibrary.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.artist),r.a.createElement("td",null,r.a.createElement("button",null,r.a.createElement("i",{className:"far fa-play-circle","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Listen to ",e.title," by ",e.artist,"."))))})))):r.a.createElement(h.a,{to:"/"}))},k=function(){return r.a.createElement("footer",null,"kTunes 2019 | Coded by Alanna O'Connor")},N=(n(102),"https://cors-anywhere.herokuapp.com/"),C=function(e){function a(){var e;return Object(o.a)(this,a),(e=Object(u.a)(this,Object(m.a)(a).call(this))).createLibrary=function(a){var n,t,r,s=[];a.forEach(function(e){"ABBA"===e.$.name||"Sugar Ray"===e.$.name||"The Beatles"===e.$.name?(n=e.$.artist.replace(/([a-z])([A-Z])/,"$1 $2"),t=e.$.name,r=e._.trim()):(n=e.$.name.replace(/([a-z])([A-Z])/,"$1 $2"),t=e.$.artist,r=e._.trim());var a={title:n,artist:t,id:r};s.push(a)}),e.sortLibrary(s)},e.sortLibrary=function(a){var n=a.sort(function(e,a){return e.artist<a.artist?-1:e.artist>a.artist?1:void 0});e.setState({kTunesLibrary:n})},e.listUsersSongs=function(a){a.preventDefault();E.a.get(N+"https://kepler.space/frontend2019/stinging_phonemes/listSongs",{headers:{Authorization:"Bearer stinging_phonemes "},params:{method:"GET",email:"".concat(e.state.userEmail),password:"".concat(e.state.userPassword)}}).then(function(a){var t=[];(0,n(17).parseString)(a.data,function(e,a){t.push(a.response.songs[0].song)}),e.addUsersDownloadsToLibrary(t),e.setState({signInError:null,signInSuccess:!0,usersDownloads:t[0]})}).catch(function(a){e.setState({signInError:"No account found. Please try again or create a new account."})})},e.addUsersDownloadsToLibrary=function(a){var n=[],t=[];a[0].forEach(function(e){var a=e.trim();t.push(a)}),t.forEach(function(a){e.state.kTunesLibrary.map(function(e){e.id===a&&n.push(e)})}),e.setState({usersLibrary:n})},e.updateUsersLibrary=function(a){var n=[];e.state.kTunesLibrary.map(function(e){e.id===a&&n.push(e)}),e.setState({usersLibrary:n})},e.downloadSong=function(a){var n=a.currentTarget.value;e.getSong(n),e.updateUsersLibrary(n),e.getLastDownload(n)},e.getLastDownload=function(a){var n=[];e.state.kTunesLibrary.map(function(e){e.id===a&&n.push(e)}),e.setState({lastDownloadId:n})},e.getSong=function(a){E.a.get(N+"https://kepler.space/frontend2019/stinging_phonemes/getSong",{headers:{Authorization:"Bearer stinging_phonemes "},params:{method:"GET",email:"".concat(e.state.userEmail),password:"".concat(e.state.userPassword),songid:"".concat(a)}}).then(function(e){var a=n(17).parseString,t=e.data,r=[];a(t,function(e,a){r.push(a.response)})}).catch(function(a){e.setState({errorMessage:a.message})})},e.createUser=function(a){a.preventDefault();E.a.get(N+"https://kepler.space/frontend2019/stinging_phonemes/createUser",{headers:{Authorization:"Bearer stinging_phonemes "},params:{method:"GET",name:"".concat(e.state.username),email:"".concat(e.state.userEmail),password:"".concat(e.state.userPassword)}}).then(function(a){var t=n(17).parseString,r=a.data,s=[];t(r,function(e,a){s.push(a.response)}),"User already exists."===s[0]._&&e.setState({signInError:"An account already exists with this information.",signInSuccess:!1}),e.setState({signInSuccess:!0})}).catch(function(a){e.setState({errorMessage:a.message})})},e.handleChange=function(a){var n=a.target.name,t=a.target.value;e.setState(Object(i.a)({},n,"".concat(t)))},e.signOut=function(){e.setState({signInSuccess:!1,userEmail:"",userPassword:"",username:"",lastDownloadId:{}})},e.state={kTunesLibrary:[],usersLibrary:[],username:"",userEmail:"",userPassword:"",lastDownloadId:[],usersDownloads:[],signInError:null,errorMessage:null,signInSuccess:!1},e}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.get(N+"https://kepler.space/frontend2019/stinging_phonemes/listSongs",{headers:{Authorization:"Bearer stinging_phonemes "},params:{method:"GET"}}).then(function(a){var t=n(17).parseString,r=a.data,s=[];t(r,function(e,a){s.push(a.response.songs[0].song)}),e.createLibrary(s[0])}).catch(function(a){e.setState({errorMessage:a.message})})}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(w,{listUsersSongs:this.listUsersSongs,username:this.state.username,signInSuccess:this.state.signInSuccess,usersLibrary:this.state.usersLibrary,signOut:this.signOut}),r.a.createElement(h.b,{path:"/",exact:!0,render:function(){return r.a.createElement(b,{errorMessage:e.state.errorMessage})}}),r.a.createElement(h.b,{path:"/home",render:function(){return r.a.createElement(S,{homeLibrary:e.state.kTunesLibrary,downloadSong:e.downloadSong,usersDownloads:e.state.usersDownloads,usersLibrary:e.state.usersLibrary,lastDownloadId:e.state.lastDownloadId,signInSuccess:e.state.signInSuccess})}}),r.a.createElement(h.b,{path:"/newuser",render:function(){return r.a.createElement(v,{signInSuccess:e.state.signInSuccess,handleChange:e.handleChange,createUser:e.createUser,username:e.state.username,userEmail:e.state.userEmail,userPassword:e.state.userPassword,signInError:e.state.signInError,errorMessage:e.state.errorMessage})}}),r.a.createElement(h.b,{path:"/signin",render:function(){return r.a.createElement(L,{listUsersSongs:e.listUsersSongs,handleChange:e.handleChange,userEmail:e.state.userEmail,userPassword:e.state.userPassword,signInError:e.state.signInError,usersDownloads:e.state.usersDownloads,signInSuccess:e.state.signInSuccess})}}),r.a.createElement(h.b,{path:"/mylibrary",render:function(){return r.a.createElement(I,{usersLibrary:e.state.usersLibrary,usersDownloads:e.state.usersDownloads,username:e.state.username,signInSuccess:e.state.signInSuccess})}}),r.a.createElement(k,null)))}}]),a}(t.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,a,n){e.exports=n.p+"static/media/keplerLogo.3599862a.png"},70:function(e,a,n){e.exports=n(124)},75:function(e,a,n){}},[[70,1,2]]]);
//# sourceMappingURL=main.c600a778.chunk.js.map